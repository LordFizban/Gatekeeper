<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>The Iron Gatekeeper</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body class="mode-gatekeeper">
    <div class="background-glow"></div>

    <main class="container">
        <header>
            <h1>Story <span class="gradient-text" data-i18n="titleSuffix_GK">Gatekeeper</span></h1>

            <div class="controls-row">
                <!-- Mode Toggle -->
                <div class="mode-toggle-container">
                    <span id="mode-label-text" class="mode-label">💪 Power</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="mode-toggle-input">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <select id="lang-select" class="lang-selector">
                    <option value="en">🇺🇸 English</option>
                    <option value="tr">🇹🇷 Türkçe</option>
                </select>
            </div>

            <p class="subtitle" data-i18n="subtitle">Dual-Mode Definition of Ready Validation.</p>
        </header>

        <div class="app-layout">
            <!-- Left Column: Input -->
            <section class="input-section glass-panel">
                <div class="input-group">
                    <label for="story-title" data-i18n="labelTitle">Story Title</label>
                    <input type="text" id="story-title" data-i18n-placeholder="phTitle"
                        placeholder="e.g., User Login with Google Auth">
                </div>

                <div class="input-group" id="value-type-container">
                    <label for="value-type-select" data-i18n="labelValueType">Value Type (Strategic)</label>
                    <div class="select-wrapper">
                        <select id="value-type-select">
                            <option value="" disabled selected data-i18n="optSelectValue">Select Value Type...</option>
                            <option value="innovation" data-i18n="type_innovation">🚀 Innovation / Growth</option>
                            <option value="retention" data-i18n="type_retention">🛡️ Retention / Fix</option>
                            <option value="compliance" data-i18n="type_compliance">⚖️ Compliance / Mandatory</option>
                            <option value="efficiency" data-i18n="type_efficiency">⚡ Efficiency / Cost Cut</option>
                        </select>
                    </div>
                </div>

                <div class="input-group">
                    <label for="story-content" data-i18n="labelContent">Story Definition</label>
                    <div class="hint-text small-hint" data-i18n="labelAC">(Must include: So that, ACs, Dependencies,
                        Estimation)</div>
                    <textarea id="story-content" data-i18n-placeholder="phContent"
                        placeholder="As a [role], I want to [action], so that [benefit]...&#10;&#10;Acceptance Criteria:&#10;- Criteria 1&#10;- Criteria 2&#10;&#10;Dependencies:&#10;- None&#10;&#10;Estimation:&#10;- 3 Points"></textarea>
                </div>

                <!-- Gatekeeper Rituals -->
                <div class="ritual-checks input-group">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check-refinement">
                        <label for="check-refinement" id="label-refinement" data-i18n="checkRefinement">Refinement
                            Aligned?</label>
                    </div>
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check-alignment">
                        <label for="check-alignment" id="label-alignment" data-i18n="checkAlignment">Dependent Team
                            Aligned?</label>
                    </div>
                </div>

                <div class="actions">
                    <button id="analyze-btn" class="primary-btn" data-i18n="btnAnalyze">Analyze Story</button>
                    <button id="load-btn" class="secondary-btn" data-i18n="btnDemo">Load Demo</button>
                    <button id="clear-btn" class="secondary-btn" data-i18n="btnClear">Clear</button>
                </div>

                <div class="criteria-reference">
                    <h3 data-i18n="headerCriteria">The 6 Seals</h3>
                    <div class="criteria-grid compact">
                        <div class="criteria-card">
                            <div class="icon">🆔️</div>
                            <div class="text">
                                <h4 data-i18n="refSeal0Title">Identity</h4>
                                <p data-i18n="refSeal0Desc">Title</p>
                            </div>
                        </div>
                        <div class="criteria-card">
                            <div class="icon">💎️</div>
                            <div class="text">
                                <h4 data-i18n="refSeal1Title">Value</h4>
                                <p data-i18n="refSeal1Desc">So that...</p>
                            </div>
                        </div>
                        <div class="criteria-card">
                            <div class="icon">⚔️️</div>
                            <div class="text">
                                <h4 data-i18n="refSeal2Title">Victory</h4>
                                <p data-i18n="refSeal2Desc">3+ ACs</p>
                            </div>
                        </div>
                        <div class="criteria-card">
                            <div class="icon">🗺️️</div>
                            <div class="text">
                                <h4 data-i18n="refSeal3Title">Terrain</h4>
                                <p data-i18n="refSeal3Desc">Links</p>
                            </div>
                        </div>
                        <div class="criteria-card">
                            <div class="icon">💰️</div>
                            <div class="text">
                                <h4 data-i18n="refSeal4Title">Cost</h4>
                                <p data-i18n="refSeal4Desc">Points</p>
                            </div>
                        </div>
                        <div class="criteria-card">
                            <div class="icon">📜️</div>
                            <div class="text">
                                <h4 data-i18n="refSeal5Title">Evidence</h4>
                                <p data-i18n="refSeal5Desc">Arts/Docs</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Right Column: Results Container -->
            <div class="results-container-wrapper">

                <!-- 1. Gatekeeper Panel -->
                <section class="results-section glass-panel hidden" id="results-gatekeeper">
                    <div class="stamp-wrapper">
                        <div id="digital-stamp" class="digital-stamp">
                            <div class="stamp-inner">
                                <span class="stamp-text" data-i18n="stampPass">READY FOR FORGE</span>
                            </div>
                        </div>
                    </div>

                    <div class="feedback-list" id="gk-feedback-list">
                        <!-- Seals Injected Here -->
                    </div>
                </section>

                <!-- 2. Coach Panel -->
                <section class="results-section glass-panel hidden" id="results-coach">
                    <div class="score-container">
                        <div class="score-circle">
                            <svg class="progress-ring" width="160" height="160">
                                <circle class="progress-ring__circle-bg" stroke="rgba(255,255,255,0.1)"
                                    stroke-width="12" fill="transparent" r="70" cx="80" cy="80" />
                                <circle class="progress-ring__circle" stroke="url(#gradient)" stroke-width="12"
                                    fill="transparent" r="70" cx="80" cy="80" />
                                <defs>
                                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stop-color="#38bdf8" />
                                        <stop offset="100%" stop-color="#c084fc" />
                                    </linearGradient>
                                </defs>
                            </svg>
                            <div class="score-value">0</div>
                            <div class="score-label" data-i18n="labelScore">DoR Score</div>
                        </div>
                    </div>

                    <div class="feedback-list" id="coach-feedback-list">
                        <!-- Coach Feedback Injected Here -->
                    </div>
                </section>

                <!-- Common Actions -->
                <div style="margin-top: 1rem; text-align: center;">
                    <button id="copy-jira-btn" class="secondary-btn small-btn" data-i18n="btnJira">Copy to Jira
                        📋</button>
                </div>

            </div>
        </div>
    </main>

        <script src="js/config/locales.js"></script>
    <script src="js/core/IronGuard.js"></script>
    <script src="js/core/CognitiveCoach.js"></script>
    <script src="js/AppController.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            window.app = new AppController();
        });
    </script>
</body>

</html>